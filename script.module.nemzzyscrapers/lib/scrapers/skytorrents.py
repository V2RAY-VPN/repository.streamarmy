import requestsimport reimport xbmcimport xbmcguifrom bs4 import BeautifulSoupHeaders = {'User-Agent' : 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36' }dialog = xbmcgui.Dialog()###### If Cached Only Active ######class Scraper:	def __init__(self):		self.Base = 'https://www.skytorrents.lol/?query=%s&sort=seeders'		self.Search = ('?query=')		self.links = []		self.cached = []	def Index(self,type, term,year,imdb,torrents):		try:			if type == 'TV':				MovieName = term				SE = re.findall('''(s[0-9]+e[0-9]+)''',term,flags=re.I)[0]				term = term.replace(' ','+')				link = requests.get(self.Base %term, headers=Headers).content				soup = BeautifulSoup(link,'html.parser')				data = soup.find_all("tr",  class_={'result'})				for i in data:					try:						title = i.img['alt']						if SE.lower() in title.lower():							magnet = i.select_one("a[href*=magnet]")['href']							if 'uhd' in title.lower(): sort = '5' ; qual = '4K UHD'							elif '2160' in title.lower(): sort = '5'; qual = '4K UHD'							elif '1080' in title.lower(): sort = '6'; qual = 'FHD'							elif '720' in title.lower(): sort = '7'; qual = 'HD'							elif 'hdtv' in title.lower(): sort = '7'; qual = 'HD'							else : sort = '8'; qual = 'SD'							name = 'SkyTorrents ( Debrid ) | ' + qual + ' | ' +MovieName							self.links.append({'title': name, 'url': magnet, 'quality' : sort, 'Debrid' : True, 'Direct' : False})					except: pass				return self.links			else:				MovieName = term				year = year.strip()				term = term.replace(' ','+')				term = term+'+'+year				link = requests.get(self.Base %term, headers=Headers).content				soup = BeautifulSoup(link,'html.parser')				data = soup.find_all("tr",  class_={'result'})				for i in data:					try:						title = i.img['alt']						if year in title.lower():							magnet = i.select_one("a[href*=magnet]")['href']							if 'uhd' in title.lower(): sort = '5' ; qual = '4K UHD'							elif '2160' in title.lower(): sort = '5'; qual = '4K UHD'							elif '1080' in title.lower(): sort = '6'; qual = 'FHD'							elif '720' in title.lower(): sort = '7'; qual = 'HD'							elif 'hdtv' in title.lower(): sort = '7'; qual = 'HD'							else : sort = '8'; qual = 'SD'							name = 'SkyTorrents ( Debrid ) | ' + qual + ' | ' +MovieName							self.links.append({'title': name, 'url': magnet, 'quality' : sort, 'Debrid' : True, 'Direct' : False})					except: pass				return self.links		except Exception as c:			xbmc.log("SCRAPER ERROR SkyTorrents  ::: %s" %c , level=xbmc.LOGNOTICE)