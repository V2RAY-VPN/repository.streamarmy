import requestsimport reimport xbmcimport xbmcguifrom bs4 import BeautifulSoupdialog = xbmcgui.Dialog()ua = {"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36"}class Scraper:	def __init__(self):		self.Base = 'https://torrentgalaxy.to/torrents.php?search=%s#results&sort=seeders&order=desc'		self.Search = ('')		self.links = []	def Index(self,type, term,year,imdb,torrents):		if type == 'TV':			MovieName = term			term = term.replace(' ','+')			link = requests.get(self.Base % term.lower(),headers=ua).text			soup = BeautifulSoup(link,'html.parser')			r = soup.find_all('div', class_={'tgxtablerow'})			for i in r:				name = i.b.text				magnet = i.select('a[href*=magnet]')[0]['href']				if MovieName.lower() in name.lower().replace('.',' '):					if 'uhd' in name.lower(): sort = '5' ; qual = '4K UHD'					elif '2160' in name.lower(): sort = '5'; qual = '4K UHD'					elif '1080' in name.lower(): sort = '6'; qual = 'FHD'					elif '720' in name.lower(): sort = '7'; qual = 'HD'					elif 'hdtv' in name.lower(): sort = '7'; qual = 'HD'					else : sort = '8'; qual = 'SD'					title = ('[COLOR yellow]Torrent Galaxy ( Debrid ) | %s | %s' % (qual,MovieName))					self.links.append({'title': title, 'url': magnet, 'quality' : sort, 'Debrid' : True, 'Direct' : False})			return self.links		else:			MovieName = term			term = term.replace(' ','+')			SearchLink = ('%s+%s' % (term,year))			link = requests.get(self.Base % SearchLink,headers=ua).text			soup = BeautifulSoup(link,'html.parser')			r = soup.find_all('div', class_={'tgxtablerow'})			for i in r:				name = i.b.text				magnet = i.select('a[href*=magnet]')[0]['href']				if MovieName.lower() in name.lower():# and year.strip() in name:					if 'uhd' in name.lower(): sort = '5' ; qual = '4K UHD'					elif '2160' in name.lower(): sort = '5'; qual = '4K UHD'					elif '1080' in name.lower(): sort = '6'; qual = 'FHD'					elif '720' in name.lower(): sort = '7'; qual = 'HD'					else : sort = '8'; qual = 'SD'					title = ('[COLOR yellow]Torrent Galaxy ( Debrid ) | %s | %s' % (qual,MovieName))					self.links.append({'title': title, 'url': magnet, 'quality' : sort, 'Debrid' : True, 'Direct' : False})			return self.links